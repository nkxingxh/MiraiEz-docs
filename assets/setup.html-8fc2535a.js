import{_ as n,p as s,q as a,a1 as e}from"./framework-96b046e1.js";const t={},p=e(`<h1 id="配置" tabindex="-1"><a class="header-anchor" href="#配置" aria-hidden="true">#</a> 配置</h1><div class="custom-container tip"><p class="custom-container-title">提示</p><p>假设 Web 服务器端口为 8081, mirai-api-http 的 HTTP 适配器监听 8082 端口</p></div><h2 id="mirai-api-http-配置" tabindex="-1"><a class="header-anchor" href="#mirai-api-http-配置" aria-hidden="true">#</a> mirai-api-http 配置</h2><ol><li>启用验证并设置一个随机的 <code>verifyKey</code></li><li>确保 <code>singleMode</code> 值为 false</li></ol><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">enableVerify</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>            <span class="token comment"># 启用验证</span>
<span class="token key atrule">verifyKey</span><span class="token punctuation">:</span> qZ95l4R4TGQPrrf    <span class="token comment"># 随机生成一个, 和等下设置的 MIRAIEZ_HTTP_KEY 要一致</span>
<span class="token key atrule">singleMode</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>             <span class="token comment"># 设置为 false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>适配器配置</strong></p><p>随机生成一个 <code>Authorization</code> 用于鉴权 webhook 上报</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">adapterSettings</span><span class="token punctuation">:</span>
  <span class="token key atrule">http</span><span class="token punctuation">:</span>
    <span class="token key atrule">host</span><span class="token punctuation">:</span> 0.0.0.0
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8001</span>      <span class="token comment"># 不能和 Web 服务器的端口一样</span>
    <span class="token key atrule">cors</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>*<span class="token punctuation">]</span>
    
  <span class="token key atrule">webhook</span><span class="token punctuation">:</span>
    <span class="token comment"># 配置 webhook.php 的 URL</span>
    <span class="token key atrule">destinations</span><span class="token punctuation">:</span> 
    <span class="token punctuation">-</span> <span class="token string">&#39;http://localhost:8000/webhook.php&#39;</span>

    <span class="token comment"># 和等下设置的 MIRAIEZ_WEBHOOK_AUTH 要一致</span>
    <span class="token key atrule">extraHeaders</span><span class="token punctuation">:</span>
      <span class="token key atrule">Authorization</span><span class="token punctuation">:</span> <span class="token string">&#39;hZaomcUiaulaslD&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="miraiez-配置" tabindex="-1"><a class="header-anchor" href="#miraiez-配置" aria-hidden="true">#</a> MiraiEz 配置</h2><h3 id="适配器配置" tabindex="-1"><a class="header-anchor" href="#适配器配置" aria-hidden="true">#</a> 适配器配置</h3><p><strong>修改 config/adapter.php</strong></p><ol><li>修改 mirai-api-http 的 HTTP 适配器访问地址</li><li>修改 verifyKey</li><li>修改用于鉴权 webhook 上报的 Authorization</li></ol><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token function">define</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;MIRAIEZ_HTTP_API&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;http://localhost:8001&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// mirai-api-http 的 HTTP 适配器地址</span>
<span class="token function">define</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;MIRAIEZ_HTTP_KEY&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;qZ95l4R4TGQPrrf&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// mirai-api-http 的 verifyKey</span>
<span class="token function">define</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;MIRAIEZ_WEBHOOK_AUTH&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;hZaomcUiaulaslD&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 需要和 webhook 适配器的 Authorization 一致</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="调试配置" tabindex="-1"><a class="header-anchor" href="#调试配置" aria-hidden="true">#</a> 调试配置</h3><div class="custom-container tip"><p class="custom-container-title">提示</p><p>调试群组和好友并非框架作用域! 当消息或事件发生在启用调试的群组与好友时，如果出现未捕获的异常或者错误，MiraiEz 将会直接以消息的形式发送到当前对话中。</p></div><p><strong>修改 config/debug.php</strong></p><ol><li>设置管理员 QQ</li><li>配置启用调试的好友与群组</li></ol><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token function">define</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;MIRAIEZ_ADMIN_QQ&#39;</span><span class="token punctuation">,</span> <span class="token number">1234567890</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// 填写管理员 QQ</span>

<span class="token variable">$MIRAIEZ_DEBUG_GROUPS</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">123456789</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token comment">// 启用调试的群组</span>
<span class="token variable">$MIRAIEZ_DEBUG_FRIENDS</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1234567890</span><span class="token punctuation">]</span><span class="token punctuation">;</span>      <span class="token comment">// 启用调试的好友</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,18),i=[p];function o(l,c){return s(),a("div",null,i)}const r=n(t,[["render",o],["__file","setup.html.vue"]]);export{r as default};
